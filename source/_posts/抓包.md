title: 抓包
date: 2014-12-11 21:36:24
author: 赵空暖
tags:
- 抓包
- 测试
categories:
- 测试
---
![hehe](/image/hehe.png)
#抓包工具之比较#
##Httpwatch##
1）基本使用和技巧
2）HTTP请求时间分段分析

###时间轴###
(图片点击放大)

![watch1.png](/image/watch1.png)

* Blocked
  > The Blocked time includes any pre-processing time (such as cache lookup) and the time spent waiting for a network connection to become available. Browsers limit the number of concurrent network connections per host name (i.e. www.microsoft.com) and will queue up requests if the limit has been reached. Often the Blocked time is the most significant factor in the download time of images embedded in a web page - particularly for older browsers that will only use a maximum of two connections per hostname. Modern browsers now allow up to six connections per hostname.
* DNS Lookup
  > DNS Lookup is the time required to resolve a host name (e.g. www.google.com) into a numeric IP address (e.g. 216.239.59.99).
* Connect
  > Connect is the time required to create a TCP connection to the web server (or proxy). If a secure HTTPS connection is being used this time includes the SSL handshake process unless a separate SSL Handshaketime is shown. Keep-Alive connections are often used to avoid the overhead of repeatedly connecting to the web server.
  参看文章[关于TCP三次握手及四次挥手](http://..)
* Send
  > Send is the time required to send the HTTP request message to the server and will depend on the amount of data that is sent to the server. For example, long Send times will result from uploading files using an HTTP POST.
* Wait
  > Wait is the idle time spent waiting for a response message from the server. This value includes delays introduced due to network latency and the time required to process the request on the web server.
* Receive
  > Receive is the time taken to read the response message from the server. This value will depend on the size of the content returned, network bandwidth and whether HTTP compression was used.


##Fiddler##
* Fiddler是一个使用本地 127.0.0.1:8888 的 HTTP 代理，任何能够设置 HTTP 代理为 127.0.0.1:8888的浏览器和应用程序都可以使用 Fiddler。代理是指客户端的所有请求都要先经过Fiddler，然后转发到相应的服务器，反之，服务器端的所有响应，也都会先经过Fiddler然后发送到客户端。如下图：
![fiddler](/image/FIDDLER.png)
* https的抓取 关于fiddler的更多详细介绍 → [Fiddler简介](http://blog.csdn.net/ohmygirl/article/details/17846199)
* 使用Fiddler构造自定义请求
composer面板下可以模拟向相应的服务器发送数据的过程。如下图：
![composer](/image/composer.png)
修改User-Agent为zhaokongnuan
inspector面板下，提供headers、textview、hexview等多种方式查看单条http请求的请求报文的信息,查看刚刚发送的数据
![inspector](/image/inspectors.png)
> 在http协议里，头信息中有一个 User-Agent，它的作用是告诉服务器，用户客户端是什么浏览器，以及操作系统的信息的。在某些特殊的情况下，服务器根据浏览器的不同类型，输出不同的内容。以前很多网站都只显示给IE看，所以当时的opera浏览器还特别做了一个功能，可以把它的User-Agent换成IE的。所以user-agent是非常不可靠的，原因就是它是客户端自己决定并发送给服务器。通过修改User-Agent,可以完美的伪装操作系统、浏览器、蜘蛛、邮件客户端、链接检查、分析器、RSS 阅读器等客户端的信息。关于灌水机器人[灌水机器人](...)

* 使用Fiddler自定义服务器返回
AutoResponder面板， Fiddler比较重要且比较强大的功能之一，可用于拦截某一请求，并重定向到本地的资源，或者使用Fiddler的内置响应。可用于调试服务器端代码而无需修改服务器端的代码和配置，因为拦截和重定向后，实际上访问的是本地的文件或者得到的是Fiddler的内置响应。当勾选allow autoresponser 并设置相应的规则后,本例中的规则是将[http://www.baidu.com/](http://www.baidu.com/) 的请求拦截到本地的文件basic.html,   
如下图所示
![rules](/image/rules.png)
发出请求http://www.baidu.com/  浏览器响应结果
![response](/image/response.png)
* 另外的一个方便的功能即过滤功能，Filter标签则可以设置Fiddler的过滤规则，来达到过滤http请求的目的。最简单如：过滤内网http请求而只抓取http请求，或则过滤相应域名的http请求。Fiddler的过滤器非常强大，可以过滤特定http状态码的请求，可以过滤特定请求类型的http请求（如css请求，image请求，js请求等），可以过滤请求报文大于或则小于指定大小（byte）的请求。
![filters](/image/filters.png)

##firefox和firebug##
1)简单介绍firefox和功能强大的firebug
参看[firebug详细使用方法](http://jingyan.baidu.com/article/fd8044fa97e08c5030137a6c.html)
##科来网络分析工具的介绍##
1）过滤器的使用和多种协议包的抓取
参看[科来网络分析系统抓包简明教程](http://wenku.baidu.com/view/b94402fcf61fb7360b4c6589.html)

#课程作业#
1.本课程介绍的4种抓包工具除了都能抓包外，他们各自都有什么独特的特点？
* Httpwatch：主要特点详细的时间轴
* Fiddler： 构造自定义请求和自定义服务器返回
* firebug: 它集HTML查看和编辑、Javascript控制台、网络状况监视器于一体，是开发 JavaScript、CSS、HTML和Ajax的得力助手。Firebug也是一个除错工具。用户可以利用它除错、编辑、甚至删改任何网站的 CSS、HTML、DOM以及JavaScript代码。具体操作可参看[firebug详细使用方法](http://jingyan.baidu.com/article/fd8044fa97e08c5030137a6c.html)
* 科来：通过直接捕获网络原始数据包，并进行从网络链路层到网络应用层的全面解码分析，透视网络运行全状况。

2.简单说说抓包在你的工作中的使用场景（如果以前没有使用过，那就谈谈学习这节课后的感受）
没有使用过，感受到一个请求发出去之后是做了有DNS查找、TCP三次握手四次挥手等等一系列工作。 