<!DOCTYPE html>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" >
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  <title>金融时间序列结业作业 | KongnuanZhao</title>
  <meta name="description" content="" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="MobileOptimized" content="320" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="/favicon.ico" rel="icon" type="image/x-ico">
  <link rel="stylesheet" type="text/css" href="/css/component.css" />
  <link rel="stylesheet" type="text/css" href="/css/screen.css" />
  <meta name="generator" content="KongnuanZhao">
  <script src="http://static.duoshuo.com/embed.js"></script>
  
  
  

  

</head>
<body>
<div class="container">
    <div class="mp-pusher" id="mp-pusher">
        <i id="scroll-up" class="fa fa-angle-up"></i>
        <nav id="mp-menu" class="mp-menu">
            <div class="mp-level">
                <a data-pjax class="back-home" style="font-size: 20px" href="/"><h2 ><i class="fa fa-home"></i>
                        Home</h2></a>
                <ul class="first-level">
                    <li>
                        <a class="fa fa-archive" href="#"><i class="fa fa-angle-left">
                            </i>&nbsp;&nbsp;Archive</a>
                        <div class="mp-level page-list">
                            <h2 ><i class="fa fa-archive"></i>
                                Archive</h2>
                            <a class="mp-back" href="#">back</a>
                            <form id="search-form" action="">
                                <input type="text" class="search search-archive" placeholder="Search.."/>
                            </form>
                            <ul>
                                <div class="mp-scroll">
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/28/潍坊物价信息数据分析及展现/">潍坊物价信息数据分析及展现</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/28/论文数据分析/">论文数据分析</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/28/金融时间序列结业作业/">金融时间序列结业作业</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/28/一个人的碎碎读/">一个人的碎碎读</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/27/关于TCP三次握手及四次挥手/">关于TCP三次握手及四次挥手</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/23/为什么只有13台dns根服务器/">为什么只有13台dns根服务器</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/23/性能测试之时间都去哪了/">性能测试之时间都去哪了</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/22/这些年上过的课/">这些年上过的课</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/21/熟悉的陌生人OS/">熟悉的陌生人OS</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/15/记录总结这半学期/">记录总结这半学期</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/11/抓包/">抓包</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/10/通过源码学习hexo/">通过源码学习hexo</a>
                                </li>
                                
                                <li class="search-archive-li mp-pjax">
                                    <a href="/2014/12/08/新的开始/">新的开始</a>
                                </li>
                                
                                </div>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a class="fa fa-copy" href="#"><i class="fa fa-angle-left">
                            </i>&nbsp;&nbsp;Categories</a>

                        <div class="mp-level page-list">
                            <h2 ><i class="fa fa-copy"></i>
                                Categories</h2>
                            <a class="mp-back" href="#">back</a>
                            <form id="search-form" action="">
                                <input type="text" class="search search-category" placeholder="Search.."/>
                            </form>
                            <ul>
                                <div class="mp-scroll">
                                
                                <li class="search-category-li mp-pjax">
                                    <a href="/categories/R/">&nbsp;&nbsp;&nbsp;R</a>
                                    <small>2</small>
                                </li>
                                
                                <li class="search-category-li mp-pjax">
                                    <a href="/categories/hexo/">&nbsp;&nbsp;&nbsp;hexo</a>
                                    <small>1</small>
                                </li>
                                
                                <li class="search-category-li mp-pjax">
                                    <a href="/categories/性能测试/">&nbsp;&nbsp;&nbsp;性能测试</a>
                                    <small>1</small>
                                </li>
                                
                                <li class="search-category-li mp-pjax">
                                    <a href="/categories/操作系统/">&nbsp;&nbsp;&nbsp;操作系统</a>
                                    <small>1</small>
                                </li>
                                
                                <li class="search-category-li mp-pjax">
                                    <a href="/categories/R/数据分析/">&nbsp;&nbsp;&nbsp;数据分析</a>
                                    <small>2</small>
                                </li>
                                
                                <li class="search-category-li mp-pjax">
                                    <a href="/categories/数据分析/">&nbsp;&nbsp;&nbsp;数据分析</a>
                                    <small>1</small>
                                </li>
                                
                                <li class="search-category-li mp-pjax">
                                    <a href="/categories/测试/">&nbsp;&nbsp;&nbsp;测试</a>
                                    <small>2</small>
                                </li>
                                
                                <li class="search-category-li mp-pjax">
                                    <a href="/categories/点滴/">&nbsp;&nbsp;&nbsp;点滴</a>
                                    <small>3</small>
                                </li>
                                
                                <li class="search-category-li mp-pjax">
                                    <a href="/categories/读书有疑/点滴/">&nbsp;&nbsp;&nbsp;点滴</a>
                                    <small>1</small>
                                </li>
                                
                                <li class="search-category-li mp-pjax">
                                    <a href="/categories/读书有疑/">&nbsp;&nbsp;&nbsp;读书有疑</a>
                                    <small>2</small>
                                </li>
                                
                                </div>
                            </ul>
                        </div>
                    </li>
                    <li>
                        <a class="fa fa-tags" href="#"><i class="fa fa-angle-left">
                            </i>&nbsp;&nbsp;Tags</a>
                        <div class="mp-level page-list">
                            <h2 ><i class="fa fa-tags"></i>
                                Tags</h2>
                            <a class="mp-back" href="#">back</a>
                            <form id="search-form" action="">
                                <input type="text" class="search search-tag" placeholder="Search.."/>
                            </form>
                            <ul>
                                <div class="mp-scroll">
                                
                                <li class="search-tag-li mp-pjax">
                                    <a href="/tags/R/">&nbsp;&nbsp;&nbsp;R</a>
                                    <small>2</small>
                                </li>
                                
                                <li class="search-tag-li mp-pjax">
                                    <a href="/tags/TCP/">&nbsp;&nbsp;&nbsp;TCP</a>
                                    <small>1</small>
                                </li>
                                
                                <li class="search-tag-li mp-pjax">
                                    <a href="/tags/hexo/">&nbsp;&nbsp;&nbsp;hexo</a>
                                    <small>1</small>
                                </li>
                                
                                <li class="search-tag-li mp-pjax">
                                    <a href="/tags/工具/">&nbsp;&nbsp;&nbsp;工具</a>
                                    <small>1</small>
                                </li>
                                
                                <li class="search-tag-li mp-pjax">
                                    <a href="/tags/开始/">&nbsp;&nbsp;&nbsp;开始</a>
                                    <small>1</small>
                                </li>
                                
                                <li class="search-tag-li mp-pjax">
                                    <a href="/tags/性能测试/">&nbsp;&nbsp;&nbsp;性能测试</a>
                                    <small>1</small>
                                </li>
                                
                                <li class="search-tag-li mp-pjax">
                                    <a href="/tags/抓包/">&nbsp;&nbsp;&nbsp;抓包</a>
                                    <small>1</small>
                                </li>
                                
                                <li class="search-tag-li mp-pjax">
                                    <a href="/tags/操作系统/">&nbsp;&nbsp;&nbsp;操作系统</a>
                                    <small>1</small>
                                </li>
                                
                                <li class="search-tag-li mp-pjax">
                                    <a href="/tags/数据分析/">&nbsp;&nbsp;&nbsp;数据分析</a>
                                    <small>3</small>
                                </li>
                                
                                <li class="search-tag-li mp-pjax">
                                    <a href="/tags/测试/">&nbsp;&nbsp;&nbsp;测试</a>
                                    <small>1</small>
                                </li>
                                
                                <li class="search-tag-li mp-pjax">
                                    <a href="/tags/点滴/">&nbsp;&nbsp;&nbsp;点滴</a>
                                    <small>1</small>
                                </li>
                                
                                <li class="search-tag-li mp-pjax">
                                    <a href="/tags/读书有疑/">&nbsp;&nbsp;&nbsp;读书有疑</a>
                                    <small>2</small>
                                </li>
                                
                                </div>
                            </ul>
                        </div>
                    </li>
                    
                    <li>
                        <a class="fa fa-weibo" href="http://weibo.com/zhaokongnuan/profile?rightmod=1&wvr=6&mod=personinfo" target="_blank">&nbsp;&nbsp;Weibo Show</a>   
                    </li>
                    
                    <li class="mp-pjax"><a class="fa fa-user" href="/about">&nbsp;&nbsp;&nbsp;About me</a></li>
                    <li><a class="fa fa-github" href="https://github.com/KongnuanZhao/KongnuanZhao.github.io.git" target="_blank">&nbsp;&nbsp;&nbsp;Github</a></li>

                </ul>

            </div>
        </nav>
        <div id="pjax">
            <div class="pjax-hidden" style="display: none">
                
                    <a  data-pjax href="/2014/12/28/潍坊物价信息数据分析及展现/">潍坊物价信息数据分析及展现</a>
                
                    <a  data-pjax href="/2014/12/28/论文数据分析/">论文数据分析</a>
                
                    <a  data-pjax href="/2014/12/28/金融时间序列结业作业/">金融时间序列结业作业</a>
                
                    <a  data-pjax href="/2014/12/28/一个人的碎碎读/">一个人的碎碎读</a>
                
                    <a  data-pjax href="/2014/12/27/关于TCP三次握手及四次挥手/">关于TCP三次握手及四次挥手</a>
                
                    <a  data-pjax href="/2014/12/23/为什么只有13台dns根服务器/">为什么只有13台dns根服务器</a>
                
                    <a  data-pjax href="/2014/12/23/性能测试之时间都去哪了/">性能测试之时间都去哪了</a>
                
                    <a  data-pjax href="/2014/12/22/这些年上过的课/">这些年上过的课</a>
                
                    <a  data-pjax href="/2014/12/21/熟悉的陌生人OS/">熟悉的陌生人OS</a>
                
                    <a  data-pjax href="/2014/12/15/记录总结这半学期/">记录总结这半学期</a>
                
                    <a  data-pjax href="/2014/12/11/抓包/">抓包</a>
                
                    <a  data-pjax href="/2014/12/10/通过源码学习hexo/">通过源码学习hexo</a>
                
                    <a  data-pjax href="/2014/12/08/新的开始/">新的开始</a>
                
                
                    <a data-pjax href="/categories/R/">&nbsp;&nbsp;R</a>
                
                    <a data-pjax href="/categories/hexo/">&nbsp;&nbsp;hexo</a>
                
                    <a data-pjax href="/categories/性能测试/">&nbsp;&nbsp;性能测试</a>
                
                    <a data-pjax href="/categories/操作系统/">&nbsp;&nbsp;操作系统</a>
                
                    <a data-pjax href="/categories/R/数据分析/">&nbsp;&nbsp;数据分析</a>
                
                    <a data-pjax href="/categories/数据分析/">&nbsp;&nbsp;数据分析</a>
                
                    <a data-pjax href="/categories/测试/">&nbsp;&nbsp;测试</a>
                
                    <a data-pjax href="/categories/点滴/">&nbsp;&nbsp;点滴</a>
                
                    <a data-pjax href="/categories/读书有疑/点滴/">&nbsp;&nbsp;点滴</a>
                
                    <a data-pjax href="/categories/读书有疑/">&nbsp;&nbsp;读书有疑</a>
                
                
                    <a data-pjax href="/tags/R/">&nbsp;&nbsp;R</a>
                
                    <a data-pjax href="/tags/TCP/">&nbsp;&nbsp;TCP</a>
                
                    <a data-pjax href="/tags/hexo/">&nbsp;&nbsp;hexo</a>
                
                    <a data-pjax href="/tags/工具/">&nbsp;&nbsp;工具</a>
                
                    <a data-pjax href="/tags/开始/">&nbsp;&nbsp;开始</a>
                
                    <a data-pjax href="/tags/性能测试/">&nbsp;&nbsp;性能测试</a>
                
                    <a data-pjax href="/tags/抓包/">&nbsp;&nbsp;抓包</a>
                
                    <a data-pjax href="/tags/操作系统/">&nbsp;&nbsp;操作系统</a>
                
                    <a data-pjax href="/tags/数据分析/">&nbsp;&nbsp;数据分析</a>
                
                    <a data-pjax href="/tags/测试/">&nbsp;&nbsp;测试</a>
                
                    <a data-pjax href="/tags/点滴/">&nbsp;&nbsp;点滴</a>
                
                    <a data-pjax href="/tags/读书有疑/">&nbsp;&nbsp;读书有疑</a>
                
                <a data-pjax class="fa fa-user" href="/about">&nbsp;&nbsp;&nbsp;About me</a>
            </div>
            <nav class="nexus">
                <li  style="border-left: 1px solid #c6d0da;">
                    <a id="trigger" href="#"><i class="fa fa-bars"></i></a>
                </li>
                <li ><a id="nexus-back" data-pjax href="/">KongnuanZhao</a></li>
                
                <div id="nav-container">
                    <div class="post-navbar" style="line-height: 63px;display:none">
                        <li id="navbar-title"><a href="#">金融时间序列结业作业</a></li>
                        <li id="navbar-toc" style="border-left: none">
                            <a style="padding-right: 15px">
                                <span id="toc-content" >Introduction</span><i class="fa fa-chevron-down" ></i>
                            </a>
                            <div class="hidden-box">
                                <ul id="toc"></ul>
                            </div>
                        </li>
                    </div>
                </div>
                
            </nav>

            <div class="scroller">
            <div class="scroller-inner">


<!-- -->
<!--<body class="post-template">-->
<!---->
  

<main class="content" role="main">
    <article class="post" >
    <span class="post-meta">
                  <div class="tag-tile">
                      
                      
                      <a data-pjax href='/tags/R/' style='color:#D5D5D5'>R</a>
                      
                      <a data-pjax href='/tags/数据分析/' style='color:#D5D5D5'>数据分析</a>
                      
                      
                  </div>
                <h1 class="post-title" style="margin: 14px 0;color:#50585D">金融时间序列结业作业</h1>

                    <div class="post-meta">
                        Post on<span class="fa fa-clock-o"></span>
                        <time datetime="2014-12-28T05:55:36.000Z"
                              itemprop="datePublished">Dec 28 2014</time>
                        By 赵空暖
                    </div>
    </span>

        <section class="post-content">
            <h1 id="结业测试大作业">结业测试大作业</h1>
<blockquote>
<p>内容：使用在课程中学过的各种时间序列模型为某实际场景建模，并且诠释你的结果的意义。<br>要求：<br>1.要解决的问题有意义，业务背景要有详细的介绍与解释<br>2.数据真实，标明数据来源，可以使用参考书的数据，但不得与书上的例子一致，即可以使用书上的数据构建新的模型（注：新的模型是指另一个种类的模型，如AR（1）与AR（3）看做同一个模型）<br>3.数学建模和数学工具运用正确及有效，要求对同一数据尝试2种或以上的时间序列模型，或采用2种或以上的不同参数估计方法<br>4.使用R其它各种工具进行实际计算验证，程序和结果正确<br>5.对模型结果要结合业务背景进行详细解释，不得只有代码结果而没有相应解释 </p>
</blockquote>
<p>问题意义以及数据来源移步<a href="http://www.zhaokongnuan.com/2014/12/28/%E6%BD%8D%E5%9D%8A%E7%89%A9%E4%BB%B7%E4%BF%A1%E6%81%AF%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E5%8F%8A%E5%B1%95%E7%8E%B0/" target="_blank" rel="external">之前自己写的这篇文章</a><br>这是在炼数成金上学完rapidminer这门课假期里完成的，那么这次作业要求对同一数据尝试两种以上的时间序列模型或两种以上的不同参数估计方法，所以还是用这里面抓取的数据，尝试使用R进行实际计算验证。</p>
<h3 id="环境准备：">环境准备：</h3>
<p>win7 64bit<br>R version 3.1.1 (2014-07-10)<br>mysqk Server version: 5.5.20-log MySQL Community Server (GPL)</p>
<h2 id="通过ODBC进行R和mysql的连接">通过ODBC进行R和mysql的连接</h2>
<figure class="highlight r"><pre><div class="line">&gt;install.packages(<span class="string">"RODBC"</span>)</div><div class="line">trying URL <span class="string">'http://cran.rstudio.com/bin/windows/contrib/3.1/RODBC_1.3-10.zip'</span></div><div class="line">Content type <span class="string">'application/zip'</span> length <span class="number">828501</span> bytes (<span class="number">809</span> Kb)</div><div class="line">opened URL</div><div class="line">downloaded <span class="number">809</span> Kb</div><div class="line"></div><div class="line">package ‘RODBC’ successfully unpacked and MD5 sums checked</div><div class="line"></div><div class="line">The downloaded binary packages are <span class="keyword">in</span></div><div class="line">	C:\Users\Administrator\AppData\Local\Temp\Rtmp2H55eL\downloaded_packages</div><div class="line">&gt;<span class="keyword">library</span>(RODBC)</div><div class="line">&gt;channel &lt;- odbcConnect(<span class="string">"rmysql"</span>, uid=<span class="string">"root"</span>, pwd=<span class="string">""</span>);</div><div class="line">&gt;sqlTables(channel)<span class="comment">#查看数据中的表</span></div><div class="line">   TABLE_CAT TABLE_SCHEM   TABLE_NAME TABLE_TYPE REMARKS</div><div class="line"><span class="number">1</span>       test                  foodcpi      TABLE        </div><div class="line"><span class="number">2</span>       test                  from_to      TABLE        </div><div class="line"><span class="number">3</span>       test                globalcpi      TABLE        </div><div class="line"><span class="number">4</span>       test                    goods      TABLE        </div><div class="line"><span class="number">5</span>       test                 monthcpi      TABLE        </div><div class="line"><span class="number">6</span>       test                    place      TABLE        </div><div class="line"><span class="number">7</span>       test                  pre_cab      TABLE        </div><div class="line"><span class="number">8</span>       test                    price      TABLE        </div><div class="line"><span class="number">9</span>       test             reservations      TABLE        </div><div class="line"><span class="number">10</span>      test                   sheet9      TABLE        </div><div class="line"><span class="number">11</span>      test               userdetail      TABLE        </div><div class="line"><span class="number">12</span>      test               yujingdata      TABLE        </div><div class="line"><span class="number">13</span>      test                      zkn      TABLE </div><div class="line">&gt;data&lt;-sqlFetch(channel,<span class="string">"foodcpi"</span>)<span class="comment"># 查看表的内容，存到数据框里</span></div><div class="line">&gt;head(data)</div><div class="line">        日期 食品类 粮食类 肉禽及其制品类  蛋类 水产品类 鲜菜类 鲜果类</div><div class="line"><span class="number">1</span> <span class="number">2014</span>-<span class="number">06</span>-<span class="number">01</span>  <span class="number">103.7</span>  <span class="number">103.2</span>          <span class="number">101.9</span> <span class="number">113.1</span>    <span class="number">104.0</span>   <span class="number">98.2</span>  <span class="number">119.8</span></div><div class="line"><span class="number">2</span> <span class="number">2014</span>-<span class="number">05</span>-<span class="number">01</span>  <span class="number">104.1</span>  <span class="number">103.0</span>          <span class="number">103.2</span> <span class="number">117.6</span>    <span class="number">105.0</span>   <span class="number">97.5</span>  <span class="number">120.0</span></div><div class="line"><span class="number">3</span> <span class="number">2014</span>-<span class="number">04</span>-<span class="number">01</span>  <span class="number">102.3</span>  <span class="number">102.8</span>           <span class="number">99.3</span> <span class="number">107.0</span>    <span class="number">105.7</span>   <span class="number">92.1</span>  <span class="number">118.6</span></div><div class="line"><span class="number">4</span> <span class="number">2014</span>-<span class="number">03</span>-<span class="number">01</span>  <span class="number">104.1</span>  <span class="number">102.7</span>           <span class="number">98.2</span> <span class="number">100.4</span>    <span class="number">107.7</span>  <span class="number">112.9</span>  <span class="number">117.3</span></div><div class="line"><span class="number">5</span> <span class="number">2014</span>-<span class="number">02</span>-<span class="number">01</span>  <span class="number">102.7</span>  <span class="number">102.8</span>           <span class="number">97.0</span>  <span class="number">94.2</span>    <span class="number">104.7</span>  <span class="number">103.3</span>  <span class="number">119.7</span></div><div class="line"><span class="number">6</span> <span class="number">2014</span>-<span class="number">01</span>-<span class="number">01</span>  <span class="number">103.7</span>  <span class="number">103.1</span>          <span class="number">100.3</span>  <span class="number">96.2</span>    <span class="number">106.3</span>  <span class="number">102.1</span>  <span class="number">123.0</span></div></pre></figure>

<p>需要载入的包</p>
<figure class="highlight r"><pre><div class="line">install_github(<span class="string">'recharts'</span>,<span class="string">'taiyun'</span>)</div><div class="line"><span class="keyword">require</span>(devtools)</div><div class="line"><span class="keyword">require</span>(recharts)</div><div class="line"><span class="keyword">require</span>(plyr)</div><div class="line"><span class="keyword">require</span>(ggplot2)</div></pre></figure>

<p>用recharts画一个简单的关于CPI八大类月度价格图,使用recharts是因为其交互性强，以下展示均可和用户交互。</p>
<figure class="highlight r"><pre><div class="line"><span class="keyword">attach</span>(data)</div><div class="line">time &lt;-as.Date(日期,<span class="string">"%Y/%m/%d"</span>)</div><div class="line">rownames(data)&lt;-time</div><div class="line">pic&lt;-eBar(data[,-<span class="number">1</span>],size = c(<span class="number">1040</span>,<span class="number">488</span>),title = <span class="string">'价格走势图'</span>,opt=list(dataZoom=list(show=<span class="literal">TRUE</span>,end=<span class="number">35</span>)),legend.orient=<span class="string">"vertical"</span>)</div><div class="line">plot(eBar(data[,-<span class="number">1</span>],size = c(<span class="number">1040</span>,<span class="number">488</span>),title = <span class="string">'价格走势图'</span>,opt=list(dataZoom=list(show=<span class="literal">TRUE</span>,end=<span class="number">35</span>)),legend.orient=<span class="string">"vertical"</span>))</div><div class="line">print(pic)</div></pre></figure>


<p>（如加载缓慢请重新刷新该页面）</p>
<script src="http://echarts.baidu.com/doc/example/www/js/echarts.js"></script>
<div id="eBarID197041c54b97" style="width:800px; height:450px; ;border:1px solid #ccc;padding:5px;"></div>
<script>

   require.config({
        paths:{ 
            'echarts': 'http://echarts.baidu.com/build/dist'
        }
    });

    // Step:4 require echarts and use it in the callback.
    require(
        [
            'echarts',
            'echarts/chart/bar',
            'echarts/chart/line',
            'echarts/chart/scatter',
            'echarts/chart/k',
            'echarts/chart/pie',
            'echarts/chart/map',
            'echarts/chart/force',
            'echarts/chart/radar'
        ],
    function(ec) {
        var EChart_eBarID197041c54b97 = ec.init(document.getElementById('eBarID197041c54b97'))
        var option_eBarID197041c54b97 = 
{
    "dataZoom" : {
        "show" : true,
        "end" : 35
    },
    "title" : {
        "text" :  "价格走势图",
        "subtext" : "",
        "x" : "center",
        "y" : "top"
    },
    "calculable" : true,
    "tooltip" : {
        "show" : true,
        "trigger" : "item"
    },
    "toolbox" : {
        "show" : true,
        "x" : "right",
        "y" : "top",
        "orient" : "horizontal",
        "feature" : {
            "mark" : {
                "show" : true
            },
            "dataZoom" : {
                "show" : false
            },
            "magicType" : {
                "show" : true,
                "type" : [
                    "line",
                    "bar",
                    "stack",
                    "tiled"
                ]
            },
            "restore" : {
                "show" : true
            },
            "dataView" : {
                "show" : {
                    "readOnly" : false
                }
            },
            "saveAsImage" : {
                "show" : true
            }
        }
    },
    "legend" : {
        "show" : true,
        "orient" : "vertical",
        "x" : "left",
        "y" : "top",
        "data" : [
            "食品类",
            "粮食类",
            "肉禽及其制品类",
            "蛋类",
            "水产品类",
            "鲜菜类",
            "鲜果类"
        ]
    },
    "xAxis" : {
        "position" : "bottom",
        "name" : "",
        "nameLocation" : "start",
        "scale" : true,
        "precision" : 2,
        "power" : 2,
        "axisLine" : {
            "show" : true
        },
        "axisTick" : {
            "show" : false
        },
        "axisLable" : {
            "show" : true,
            "textStyle" : {
                "color" : "black"
            }
        },
        "splitLine" : {
            "show" : true
        },
        "splitArea" : {
            "show" : false
        },
        "type" : "category",
        "data" : [
            "2014-06-01",
            "2014-05-01",
            "2014-04-01",
            "2014-03-01",
            "2014-02-01",
            "2014-01-01",
            "2013-12-01",
            "2013-11-01",
            "2013-10-01",
            "2013-09-01",
            "2013-08-01",
            "2013-07-01",
            "2013-06-01",
            "2013-05-01",
            "2013-04-01",
            "2013-02-01",
            "2013-01-01",
            "2014-07-01"
        ],
        "boundaryGap" : true
    },
    "yAxis" : {
        "position" : "left",
        "name" : "",
        "nameLocation" : "start",
        "scale" : true,
        "precision" : 2,
        "power" : 2,
        "axisLine" : {
            "show" : true
        },
        "axisTick" : {
            "show" : false
        },
        "axisLable" : {
            "show" : true
        },
        "splitLine" : {
            "show" : true
        },
        "splitArea" : {
            "show" : false
        },
        "type" : "value",
        "boundaryGap" : [
            0,
            0
        ]
    },
    "series" : [
        {
            "type" : "bar",
            "name" : "食品类",
            "data" : [
                103.7,
                104.1,
                102.3,
                104.1,
                102.7,
                103.7,
                104.1,
                105.9,
                106.5,
                106.1,
                104.7,
                105,
                104.9,
                103.7,
                104.1,
                102.3,
                104.1,
                102.7
            ]
        },
        {
            "type" : "bar",
            "name" : "粮食类",
            "data" : [
                103.2,
                103,
                102.8,
                102.7,
                102.8,
                103.1,
                103.8,
                104,
                103.8,
                104,
                104.7,
                105.1,
                105.1,
                103.2,
                103,
                102.8,
                102.7,
                102.8
            ]
        },
        {
            "type" : "bar",
            "name" : "肉禽及其制品类",
            "data" : [
                101.9,
                103.2,
                99.3,
                98.2,
                97,
                100.3,
                103.6,
                105.5,
                105.8,
                106.6,
                107.2,
                105.9,
                104.8,
                101.9,
                103.2,
                99.3,
                98.2,
                97
            ]
        },
        {
            "type" : "bar",
            "name" : "蛋类",
            "data" : [
                113.1,
                117.6,
                107,
                100.4,
                94.2,
                96.2,
                95.9,
                98.3,
                99.3,
                101.3,
                100.3,
                101.3,
                100.3,
                113.1,
                117.6,
                107,
                100.4,
                94.2
            ]
        },
        {
            "type" : "bar",
            "name" : "水产品类",
            "data" : [
                104,
                105,
                105.7,
                107.7,
                104.7,
                106.3,
                105.5,
                106.5,
                106.4,
                105.9,
                104.3,
                103.1,
                103.1,
                104,
                105,
                105.7,
                107.7,
                104.7
            ]
        },
        {
            "type" : "bar",
            "name" : "鲜菜类",
            "data" : [
                98.2,
                97.5,
                92.1,
                112.9,
                103.3,
                102.1,
                102.6,
                122.3,
                131.5,
                118.9,
                105.2,
                111.8,
                109.7,
                98.2,
                97.5,
                92.1,
                112.9,
                103.3
            ]
        },
        {
            "type" : "bar",
            "name" : "鲜果类",
            "data" : [
                119.8,
                120,
                118.6,
                117.3,
                119.7,
                123,
                115.6,
                110.6,
                108.8,
                112.5,
                107.5,
                107.3,
                111.4,
                119.8,
                120,
                118.6,
                117.3,
                119.7
            ]
        }
    ]
}
  EChart_eBarID197041c54b97.setOption(option_eBarID197041c54b97);
        }
    );
</script>

<p>现在还是以大白菜的价格为例</p>
<figure class="highlight r"><pre><div class="line">&gt;cabb&lt;-odbcConnectExcel(<span class="string">"C:\\Users\\Administrator\\Desktop\\test.xls"</span>)</div><div class="line">&gt;cabbiage&lt;-sqlFetch(cabb,<span class="string">"Data"</span>)</div><div class="line">&gt;close(cabb)</div><div class="line">&gt;cabb2&lt;-data.frame(cabbiage$本期价格)</div><div class="line">&gt;rownames(cabb2) &lt;- cabbiage$采价日期</div><div class="line">&gt;head(cabb2)</div><div class="line">           cabbiage.本期价格</div><div class="line"><span class="number">2013</span>-<span class="number">11</span>-<span class="number">19</span>              <span class="number">0.49</span></div><div class="line"><span class="number">2013</span>-<span class="number">11</span>-<span class="number">20</span>              <span class="number">0.49</span></div><div class="line"><span class="number">2013</span>-<span class="number">11</span>-<span class="number">21</span>              <span class="number">0.59</span></div><div class="line"><span class="number">2013</span>-<span class="number">11</span>-<span class="number">22</span>              <span class="number">0.48</span></div><div class="line"><span class="number">2013</span>-<span class="number">11</span>-<span class="number">25</span>              <span class="number">0.59</span></div><div class="line"><span class="number">2013</span>-<span class="number">11</span>-<span class="number">26</span>              <span class="number">0.59</span></div><div class="line">&gt;pic2&lt;-eLine(cabb2,size = c(<span class="number">1040</span>,<span class="number">488</span>),title = <span class="string">'大白菜价格走势图'</span>,opt=list(dataZoom=list(show=<span class="literal">TRUE</span>,end=<span class="number">35</span>)),legend.orient=<span class="string">"vertical"</span>)</div><div class="line">&gt;plot(pic2)</div><div class="line">&gt;print(pic2)</div></pre></figure>

<p><!-- divChart --></p>
<div id="eLineID197051fc438e" style="width:800px; height:450px ;border:1px solid #ccc;padding:10px;"></div>

<p><!-- jsChart --></p>
<script>

   require.config({
        paths:{ 
            'echarts': 'http://echarts.baidu.com/build/dist'
        }
    });

    // Step:4 require echarts and use it in the callback.
    require(
        [
            'echarts',
            'echarts/chart/bar',
            'echarts/chart/line',
            'echarts/chart/scatter',
            'echarts/chart/k',
            'echarts/chart/pie',
            'echarts/chart/map',
            'echarts/chart/force',
            'echarts/chart/radar'
        ],
    function(ec) {
        var EChart_eLineID197051fc438e = ec.init(document.getElementById('eLineID197051fc438e'))
        var option_eLineID197051fc438e = 
{
    "dataZoom" : {
        "show" : true,
        "end" : 35
    },
    "title" : {
        "text" : "大白菜价格走势图",
        "subtext" : "",
        "x" : "center",
        "y" : "top"
    },
    "calculable" : true,
    "tooltip" : {
        "show" : true,
        "trigger" : "item"
    },
    "toolbox" : {
        "show" : true,
        "x" : "right",
        "y" : "top",
        "orient" : "horizontal",
        "feature" : {
            "mark" : {
                "show" : true
            },
            "dataZoom" : {
                "show" : false
            },
            "magicType" : {
                "show" : true,
                "type" : [
                    "line",
                    "bar",
                    "stack",
                    "tiled"
                ]
            },
            "restore" : {
                "show" : true
            },
            "dataView" : {
                "show" : {
                    "readOnly" : false
                }
            },
            "saveAsImage" : {
                "show" : true
            }
        }
    },
    "legend" : {
        "show" : true,
        "orient" : "vertical",
        "x" : "left",
        "y" : "top",
        "data" : [
            "cabbiage.本期价格"
        ]
    },
    "xAxis" : {
        "position" : "bottom",
        "name" : "",
        "nameLocation" : "start",
        "scale" : true,
        "precision" : 2,
        "power" : 2,
        "axisLine" : {
            "show" : true
        },
        "axisTick" : {
            "show" : false
        },
        "axisLable" : {
            "show" : true,
            "textStyle" : {
                "color" : "black"
            }
        },
        "splitLine" : {
            "show" : true
        },
        "splitArea" : {
            "show" : false
        },
        "type" : "category",
        "data" : [
            "2013-11-19",
            "2013-11-20",
            "2013-11-21",
            "2013-11-22",
            "2013-11-25",
            "2013-11-26",
            "2013-11-27",
            "2013-11-28",
            "2013-11-29",
            "2013-12-02",
            "2013-12-03",
            "2013-12-04",
            "2013-12-06",
            "2013-12-09",
            "2013-12-10",
            "2013-12-11",
            "2013-12-12",
            "2013-12-13",
            "2013-12-16",
            "2013-12-17",
            "2013-12-18",
            "2013-12-19",
            "2013-12-20",
            "2013-12-23",
            "2013-12-24",
            "2013-12-25",
            "2013-12-26",
            "2013-12-27",
            "2013-12-30",
            "2013-12-31",
            "2014-01-02",
            "2014-01-03",
            "2014-01-06",
            "2014-01-07",
            "2014-01-08",
            "2014-01-09",
            "2014-01-10",
            "2014-01-13",
            "2014-01-14",
            "2014-01-15",
            "2014-01-16",
            "2014-01-17",
            "2014-01-20",
            "2014-01-21",
            "2014-01-22",
            "2014-01-23",
            "2014-01-24",
            "2014-01-26",
            "2014-01-27",
            "2014-01-28",
            "2014-01-29",
            "2014-01-30",
            "2014-02-07",
            "2014-02-08",
            "2014-02-10",
            "2014-02-11",
            "2014-02-12",
            "2014-02-13",
            "2014-02-14",
            "2014-02-17",
            "2014-02-18",
            "2014-02-19",
            "2014-02-20",
            "2014-02-21",
            "2014-02-24",
            "2014-02-25",
            "2014-02-26",
            "2014-02-27",
            "2014-02-28",
            "2014-03-03",
            "2014-03-04",
            "2014-03-05",
            "2014-03-06",
            "2014-03-07",
            "2014-03-10",
            "2014-03-11",
            "2014-03-12",
            "2014-03-13",
            "2014-03-14",
            "2014-03-17",
            "2014-03-18",
            "2014-03-19",
            "2014-03-20",
            "2014-03-21",
            "2014-03-24",
            "2014-03-25",
            "2014-03-26",
            "2014-03-27",
            "2014-03-28",
            "2014-03-31",
            "2014-04-01",
            "2014-04-02",
            "2014-04-03",
            "2014-04-04",
            "2014-04-08",
            "2014-04-09",
            "2014-04-10",
            "2014-04-11",
            "2014-04-14",
            "2014-04-15",
            "2014-04-16",
            "2014-04-17",
            "2014-04-18",
            "2014-04-21",
            "2014-04-22",
            "2014-04-23",
            "2014-04-24",
            "2014-04-25",
            "2014-04-28",
            "2014-04-29",
            "2014-04-30",
            "2014-05-04",
            "2014-05-05",
            "2014-05-06",
            "2014-05-07",
            "2014-05-08",
            "2014-05-09",
            "2014-05-12",
            "2014-05-13",
            "2014-05-14",
            "2014-05-15",
            "2014-05-16",
            "2014-05-19",
            "2014-05-20",
            "2014-05-21",
            "2014-05-22",
            "2014-05-23",
            "2014-05-26",
            "2014-05-27",
            "2014-05-28",
            "2014-05-29",
            "2014-05-30",
            "2014-06-03",
            "2014-06-04",
            "2014-06-05",
            "2014-06-06",
            "2014-06-09",
            "2014-06-10",
            "2014-06-11",
            "2014-06-12",
            "2014-06-13",
            "2014-06-16",
            "2014-06-17",
            "2014-06-18",
            "2014-06-19",
            "2014-06-20",
            "2014-06-23",
            "2014-06-24",
            "2014-06-25",
            "2014-06-26",
            "2014-06-27",
            "2014-06-30",
            "2014-07-01",
            "2014-07-02",
            "2014-07-03",
            "2014-07-04",
            "2014-07-07",
            "2014-07-08",
            "2014-07-09",
            "2014-07-10",
            "2014-07-11",
            "2014-07-14",
            "2014-07-15",
            "2014-07-16",
            "2014-07-17",
            "2014-07-18",
            "2014-07-21",
            "2014-07-22",
            "2014-07-23",
            "2014-07-24",
            "2014-07-25",
            "2014-07-28",
            "2014-07-29",
            "2014-07-30"
        ],
        "boundaryGap" : true
    },
    "yAxis" : {
        "position" : "left",
        "name" : "",
        "nameLocation" : "start",
        "scale" : true,
        "precision" : 2,
        "power" : 2,
        "axisLine" : {
            "show" : true
        },
        "axisTick" : {
            "show" : false
        },
        "axisLable" : {
            "show" : true
        },
        "splitLine" : {
            "show" : true
        },
        "splitArea" : {
            "show" : false
        },
        "type" : "value",
        "boundaryGap" : [
            0,
            0
        ]
    },
    "series" : [
        {
            "type" : "line",
            "name" : "cabbiage.鏈湡浠锋牸",
            "data" : [
                0.49,
                0.49,
                0.59,
                0.48,
                0.59,
                0.59,
                0.59,
                0.59,
                0.59,
                0.68,
                0.68,
                0.68,
                0.68,
                0.48,
                0.48,
                0.48,
                0.48,
                0.48,
                0.48,
                0.48,
                0.38,
                0.38,
                0.38,
                0.38,
                0.39,
                0.39,
                0.39,
                0.39,
                0.48,
                0.48,
                0.48,
                0.58,
                0.58,
                0.58,
                0.58,
                0.58,
                0.29,
                0.58,
                0.58,
                0.58,
                0.38,
                0.58,
                0.58,
                0.58,
                0.58,
                0.58,
                0.58,
                0.58,
                0.58,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.59,
                0.59,
                0.59,
                0.59,
                0.59,
                0.59,
                0.59,
                0.59,
                0.59,
                0.59,
                0.59,
                0.59,
                1.38,
                1.38,
                1.19,
                1.19,
                1.19,
                1.19,
                1.19,
                1.19,
                1.19,
                0.99,
                0.78,
                0.78,
                0.78,
                0.78,
                0.55,
                0.55,
                0.58,
                0.68,
                0.68,
                0.48,
                0.48,
                0.48,
                0.48,
                0.48,
                0.48,
                0.48,
                0.48,
                0.48,
                0.48,
                0.48,
                0.48,
                0.68,
                0.68,
                0.39,
                0.39,
                0.88,
                0.88,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.68,
                0.88,
                0.88,
                1.25,
                1.25,
                1.25,
                1.25,
                1.25,
                1.25,
                1.25,
                1.25,
                0.79,
                0.99,
                0.99,
                0.99,
                0.99,
                1.18,
                1.18,
                0.99,
                0.99,
                0.99,
                0.99,
                0.99,
                0.99,
                0.99,
                0.99,
                1.25,
                1.25,
                1.25
            ]
        }
    ]
}
  EChart_eLineID197051fc438e.setOption(option_eLineID197051fc438e);
        }
    );
</script>

<p>使用R来分析预测大白菜数据<br>一、使用线性拟合</p>
<figure class="highlight r"><pre><div class="line">&gt;cabb_lm&lt;- lm(cabbiage[,<span class="number">1</span>]~cabbiage[,<span class="number">2</span>])</div><div class="line">&gt;summary(cabb_lm)</div><div class="line"></div><div class="line">Call:</div><div class="line">lm(formula = cabbiage[, <span class="number">1</span>] ~ cabbiage[, <span class="number">2</span>])</div><div class="line"></div><div class="line">Residuals:</div><div class="line">     Min       1Q   Median       3Q      Max </div><div class="line">-<span class="number">0.41869</span> -<span class="number">0.14042</span>  <span class="number">0.00618</span>  <span class="number">0.06052</span>  <span class="number">0.67017</span> </div><div class="line"></div><div class="line">Coefficients:</div><div class="line">                Estimate Std. Error t value Pr(&gt;|t|)    </div><div class="line">(Intercept)   -<span class="number">3.123e+01</span>  <span class="number">3.314e+00</span>  -<span class="number">9.424</span>   &lt;<span class="number">2e-16</span> ***</div><div class="line">cabbiage[, <span class="number">2</span>]  <span class="number">2.288e-08</span>  <span class="number">2.374e-09</span>   <span class="number">9.639</span>   &lt;<span class="number">2e-16</span> ***</div><div class="line">---</div><div class="line">Signif. codes:  <span class="number">0</span> ‘***’ <span class="number">0.001</span> ‘**’ <span class="number">0.01</span> ‘*’ <span class="number">0.05</span> ‘.’ <span class="number">0.1</span> ‘ ’ <span class="number">1</span></div><div class="line"></div><div class="line">Residual standard error: <span class="number">0.2002</span> on <span class="number">172</span> degrees of freedom</div><div class="line">Multiple R-squared:  <span class="number">0.3507</span>,	Adjusted R-squared:  <span class="number">0.3469</span> </div><div class="line"><span class="literal">F</span>-statistic:  <span class="number">92.9</span> on <span class="number">1</span> and <span class="number">172</span> DF,  p-value: &lt; <span class="number">2.2e-16</span></div><div class="line">&gt;plot(cabbiage$采价日期,cabbiage$本期价格,type=<span class="string">"o"</span>)</div><div class="line">&gt;abline(cabb_lm)</div><div class="line"><span class="comment">#检验残差值是否为白噪声</span></div><div class="line">&gt;Box.test(residuals(cabb_lm))</div><div class="line">Box-Pierce test</div><div class="line"></div><div class="line">data:  residuals(cabb_lm)</div><div class="line">X-squared = <span class="number">121.2962</span>, df = <span class="number">1</span>, p-value &lt; <span class="number">2.2e-16</span></div><div class="line"><span class="comment">#可见不是白噪声</span></div></pre></figure>

<p><img src="/image/line.png" alt="line"><br>二、ARIMA模型</p>
<figure class="highlight r"><pre><div class="line">&gt; time1 &lt;- as.Date(cabbiage$采价日期)</div><div class="line">&gt; class(time1)</div><div class="line">[<span class="number">1</span>] <span class="string">"Date"</span></div><div class="line">&gt; data1 &lt;- cabbiage$本期价格</div><div class="line">&gt; cabb_zoo &lt;- zoo(data1,time1)</div><div class="line">&gt; plot(cabb_zoo)</div></pre></figure>

<p><img src="/image/home1.png" alt="home1"></p>
<figure class="highlight r"><pre><div class="line">&gt; <span class="comment">#不知道怎么转成合适的ts</span></div><div class="line">&gt; cabb_ts &lt;-ts(data = data1, start =<span class="number">1</span>, frequency = <span class="number">1</span>)</div><div class="line">&gt; ts.plot(cabb_ts)</div></pre></figure>

<p><img src="/image/home2.png" alt="home2"></p>
<figure class="highlight r"><pre><div class="line">&gt; <span class="comment">#查看自相关图</span></div><div class="line">&gt; acf(cabb_ts)</div></pre></figure>

<p><img src="/image/home5.png" alt="home5"></p>
<figure class="highlight r"><pre><div class="line">&gt; <span class="comment">#查看偏相关图</span></div><div class="line">&gt; pacf(cabb_ts)</div></pre></figure>

<p><img src="/image/home6.png" alt="home6"></p>
<figure class="highlight r"><pre><div class="line">&gt; <span class="comment">#可能有季节性，用MA来拟合</span></div><div class="line">&gt; <span class="comment">#趋势通过差分来消除</span></div><div class="line">&gt; <span class="comment">#季节性因素，确定相应的period</span></div><div class="line">&gt; cabb.fit &lt;- arima(cabb_ts,order=c(<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>), seasonal=list(order=c(<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>), period=<span class="number">12</span>))</div><div class="line">&gt; cabb.fit</div><div class="line">Series: cabb_ts </div><div class="line">ARIMA(<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>)(<span class="number">0</span>,<span class="number">1</span>,<span class="number">1</span>)[<span class="number">12</span>]                    </div><div class="line"></div><div class="line">Coefficients:</div><div class="line">          ma1     sma1</div><div class="line">      -<span class="number">0.1694</span>  -<span class="number">1.0000</span></div><div class="line">s.e.   <span class="number">0.0935</span>   <span class="number">0.0863</span></div><div class="line"></div><div class="line">sigma^<span class="number">2</span> estimated as <span class="number">0.0121</span>:  log likelihood=<span class="number">110.93</span></div><div class="line">AIC=-<span class="number">215.85</span>   AICc=-<span class="number">215.7</span>   BIC=-<span class="number">206.61</span></div><div class="line">&gt; <span class="comment">#对结果进行诊断</span></div><div class="line">&gt; tsdiag(cabb.fit)</div></pre></figure>

<p><img src="/image/home0.png" alt="home0"></p>
<figure class="highlight r"><pre><div class="line">&gt; <span class="comment">#加载时间序列包</span></div><div class="line">&gt; <span class="keyword">library</span>(forecast)</div><div class="line">&gt; <span class="comment">#向前预测12期，默认情况下24期</span></div><div class="line">&gt; cabb.forecast &lt;- forecast(cabb.fit,<span class="number">12</span>)</div><div class="line">&gt; plot.forecast(cabb.forecast)</div></pre></figure>

<p><img src="/image/home3.png" alt="home3"></p>
<p>——不知道咋回事，嵌入js之后就评论框就不见了%&gt;_&lt;%——</p>

        </section>
        <hr/>
        <nav class="pagination" style="width:auto" role="pagination">
            
            <a data-pjax class="newer-posts" href="/2014/12/28/论文数据分析/">← Prev Post</a>
            
            <a class="share-button" data-original-title title>Share this Post</a>
            
            <a data-pjax class="older-posts" href="/2014/12/28/一个人的碎碎读/">Next Post →</a>
            
        </nav>
        <br/>
        <br/>
        <section id="comment">
            <div id="comment-box"></div>
        </section>


    </article>
</main>


  
<footer class="site-footer">
    
    <div class="inner">
        <section class="copyright"><a href="/"></a> &copy; KongnuanZhao 2014</section>
        <section class="poweredby">Published with <a target="_blank" href="http://hexo.io/">Hexo   </a> and Theme by <a target="_blank" href="https://github.com/yuche/hexo-theme-kael">Kael</a></section>
    </div>
</footer>
</div>
</div><!-- /scroller -->

</div><!-- /pusher -->
</div><!-- /container -->
</div>

<!-- Easter eggs -->

<div class="egg animated">
    <a id="close-button" href="#">X</a>
    <div class="block">
        <div class="loading">
            <span class="ball1"></span>
            <span class="ball2"></span>
        </div>
    </div>
</div>
  
<script src="//cdn.staticfile.org/jquery/1.11.0/jquery.min.js"></script>
<script>
    if (!window.jQuery) {
        var script = document.createElement('script');
        script.src = "/js/jquery.min.js";
        document.body.appendChild(script);
    }
</script>
<script type="text/javascript" src="/js/lib.js"></script>
<script type="text/javascript" src="/js/main.js"></script>





<link rel="stylesheet" href="/modules/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/modules/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
    (function($){

        var wrapAll = function(q) {
            $(q).each( function() {
                var $img = $(this),
                        href = $img.attr('src');
                $img.wrap('<a rel="fancybox" href="' + href + '" title="' + $img.attr('alt') + '" class="link"></a>');
            });
        };

        wrapAll('.post-content img');
        wrapAll('.post-excerpt img');
        $('[rel="fancybox"]').fancybox();
    })(jQuery);
</script>



</body>
</html>
